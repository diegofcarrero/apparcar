{% extends 'base.html' %}
{% block title %}{{ parking.name }}{% endblock %}
{% block content %}
<div class="container mt-3">
  <h3>{{ parking.name }}</h3>
  <p><strong>Ubicaci√≥n:</strong> {{ parking.nearby_place }}</p>
  <p><strong>Tarifas:</strong> Carro: ${{ parking.car_rate }} / Moto: ${{ parking.moto_rate }}</p>
  <p><strong>Espacios:</strong> Carros: {{ parking.car_spaces }} | Motos: {{ parking.moto_spaces }}</p>
  <p><strong>Horario:</strong> {{ parking.opening_time }} - {{ parking.closing_time }}</p>

  <a href="{% url 'parking_list_user' %}" class="btn btn-secondary mt-3">‚¨Ö Volver</a>
</div>
<h3>üìç Ubicaci√≥n en el mapa</h3>

<!-- Contenedor del mapa -->
<div id="map" style="height: 350px; width: 100%; border-radius: 10px;"></div>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // Coordenadas del parqueadero desde Django
    const parkingLat = {{ parking.latitude }};
    const parkingLng = {{ parking.longitude }};

    // Inicializar mapa
    const map = L.map('map').setView([parkingLat, parkingLng], 17);

    // Capa de mapa (gratuita OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    // Marcador
    L.marker([parkingLat, parkingLng])
        .addTo(map)
        .bindPopup("{{ parking.name }}<br>{{ parking.nearby_place }}")
        .openPopup();

</script>
<a
    href="https://www.google.com/maps?q={{ parking.latitude }},{{ parking.longitude }}"
    target="_blank"
    class="btn btn-primary mt-3"
>
    üìç Abrir en Google Maps
</a>

{% endblock %}
