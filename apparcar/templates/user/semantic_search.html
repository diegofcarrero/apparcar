{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>Búsqueda semántica de parqueaderos</h2>

  <form method="get" class="mb-3">
    <div class="input-group">
      <input type="text" name="q" value="{{ query }}" class="form-control" placeholder="Ej: parqueadero barato cerca del estadio">
      <button class="btn btn-primary" type="submit">Buscar</button>
    </div>
  </form>

  {% if query and results %}
    <h5>Resultados para: "{{ query }}"</h5>
    <ul class="list-group mt-3">
      {% for parking in results %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            <strong>{{ parking.name }}</strong><br>
            <small class="text-muted">{{ parking.nearby_place|default:"-" }}</small><br>
            <small>{{ parking.car_spaces }} carros · {{ parking.moto_spaces }} motos</small>
          </div>
          <div class="text-end">
            {% if scores %}
              <span class="badge bg-secondary">{{ scores.forloop.counter0|add:0 }}</span>
            {% endif %}
            <a href="{% url 'parking_sessions' parking.id %}" class="btn btn-sm btn-outline-primary">Ver</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% elif query %}
    <div class="alert alert-warning">No se encontraron resultados.</div>
  {% endif %}
</div>
{% endblock %}
